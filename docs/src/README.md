## SBS Fund smart-contracts

Проследовательность деплоя контрактов и первостепенное выполнение функций.
В конструкторе указан номер контракта, в соответствии с его номером в этом документе.

1. ProjectKepper.sol - хранитель массивов проектов относительно адресов

2. CreateProject.sol (constructor address(1)) - создание проекта, а также родитель для трех контрактов, где хранятся структуры, описывающие проекты:
– ProjectManagerMain.sol (+ тут создаются токены проектам через ProjectToken.sol)
– ProjectManagerPrice.sol
– ProjectManagerSteps.sol

3. StartFunds.sol (constructor address(2)) - старт проекта - устанавливаются все даты: старт/завершение сбора финансирования и всех этапов.

4. Ordering.sol (constructor address(2)) - процесс приема финансирования и бронирования токенов за инветорами. На текущий момент токены ещё не сминчены, они только забронированны. Все деньги хранятся на этом контракте, соответственно отсюда происходят все рефанты и очередные траншы проектам.

5. GetFundForProject.sol (constructor address(2,4)) - поочередное получение проектом всех траншей и окончательный минт всех токенов (макс-саплай минус сид-раунд) после выполнения всех обязательств перед инвесторами.

6. Claiming.sol (constructor address(2,4)) - клейм токенов инвесторами, + используется вспомагательная функция - earned(), которая высчитывает в моменте, сколько токенов доступно для клейма инветору. 
Период вестинга: равномерно в течении половины времени текущего этапа. Например, этап 4 месяца, проекта забрал очередной транш 01 янв, инвестору начинают быть доступны токены с 01 марта до 30 апреля. Но клеймить не обязательно сразу, токены можно забирать в любое время после.

7. Voiting.sol  (constructor address(2,4)) - голосование за каждый этап.

Далее необходимо выполнить функции, которые устанавливают вайтлист-адреса, только этим адресам возможно обращаться к external функция контрактов во избежании зловредного вмешательства в хранилица/стейты.
Сообщение между контрактами идет через интерфейсы.
IProjectsKeeper.sol";
ICreateProject.sol";
IOrdering.sol";

8. В Контракте ProjectKepper.sol - функция setCreatorContractAddr(address (2))
9. В Контракте CreateProject.sol - функция setAllowedAddrs(addresses (3,4,5,6,7))
10. В Контракте Ordering.sol - функция setClaimableAddrs(addresses (5,6))

Далее небольшой гайд по последовательности механики.
- создается проект,
- стартуется проект,
- собирается сид раунд,
- — а) если удачно, то проект клеймит первый транш,
- —-б) если неудачно (не добрали minTokenSale), то открывается возможность возврата инвестиций;
- старт первого этапа,
- в период от половины времени этапа до завершения этапа - выдача токенов этого этапа инвесторам;
- завершение первого этапа / начала голосования (7 дней);
- голосование 7 дней;
- —-а) если нет негатива более 51% держателей забронированных токенов, то проект может клеймить очередной транш
- —-б) есть негатив более 51%, то инвестор возвращает остаток инвестиций.
- и так повторение до последнего этапа. Отличие только при завершении последнего этапа нет никаго голосования.

P.S.
Жизнь проекта при неудаче в середине пути возможно может быть продолжена, так как и частично токены на руках у инвесторов и мы уже владеем остатками токенов, т. е. у нас может быть создан фонд по поддержке и возраждению проектов. Так как есть вероятность эмоционально негативного голосования на каких-то циклах крипторынка в целом и просто фаундер набедокурил и тд..
Короче много нюансов и разновидностей действий, тем - это всё и интересно))
